/*
[Module Metadata]
AUTHOR=Sarah Edwards/mac4n6.com/@iamevltwin
MODULE_NOTES=Applications that have been recently deleted.

[Database Metadata]
DATABASE=CurrentPowerlog.PLSQL
PLATFORM=IOS
VERSIONS=9,10,11,12,13

[Query Metadata]
QUERY_NAME=powerlog_app_deletion
ACTIVITY=App Deletion
KEY_TIMESTAMP=APP DELETED DATE

[SQL Query 11, 12, 13]
*/

SELECT
    DATETIME(APPDELETEDDATE, 'UNIXEPOCH') AS 'APP DELETED DATE',
    DATETIME(TIMESTAMP, 'UNIXEPOCH') AS TIMESTAMP,
    APPNAME AS 'APP NAME',
    APPEXECUTABLE AS 'APP EXECUTABLE NAME',
    APPBUNDLEID AS 'BUNDLE ID',
    APPBUILDVERSION AS 'APP BUILD VERSION',
    APPBUNDLEVERSION AS 'APP BUNDLE VERSION',
    APPTYPE AS 'APP TYPE',
    ID AS 'PLAPPLICATIONAGENT_EVENTNONE_ALLAPPS TABLE ID'

FROM PLAPPLICATIONAGENT_EVENTNONE_ALLAPPS

WHERE APPDELETEDDATE > 0


-- [SQL Query 10]
SELECT
    datetime(APPDELETEDDATE, 'UNIXEPOCH') AS 'APP DELETED DATE',
    datetime(TIMESTAMP, 'UNIXEPOCH') AS TIMESTAMP,
    APPNAME AS 'APP NAME',
    APPEXECUTABLE AS 'APP EXECUTABLE NAME',
    APPBUNDLEID AS 'BUNDLE ID',
    APPBUILDVERSION AS 'APP BUILD VERSION',
    APPBUNDLEVERSION AS 'APP BUNDLE VERSION',
    APPTYPE AS 'APP TYPE',
    ID AS 'PLAPPLICATIONAGENT_EVENTNONE_ALLAPPS TABLE ID'

FROM PLAPPLICATIONAGENT_EVENTNONE_ALLAPPS

WHERE APPDELETEDDATE > 0


-- [SQL Query 9]
SELECT
    datetime(APPDELETEDDATE, 'UNIXEPOCH') AS 'APP DELETED DATE',
    datetime(TIMESTAMP, 'UNIXEPOCH') AS TIMESTAMP,
    APPNAME AS 'APP NAME',
    APPBUNDLEID AS 'BUNDLE ID',
    ID AS 'PLAPPLICATIONAGENT_EVENTNONE_ALLAPPS TABLE ID'

FROM PLAPPLICATIONAGENT_EVENTNONE_ALLAPPS

WHERE APPDELETEDDATE > 0
